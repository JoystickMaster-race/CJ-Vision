import static org.apache.tools.ant.taskdefs.condition.Os.*
apply from: rootProject.file("platforms/platform.gradle")

// Build using makefile
task buildVisionUNIX {
	description "Builds vision locally"
	doLast {
		exec {
			workingDir "$cj_vision_dir"

			println "$cj_vision_dir"
			println "Building Vision Project..."
			if (project.hasProperty("debugMode")) {
				commandLine 'make', 'debug'
			} else {
				if (!file("$coproc_folder").isDirectory()) {
					println("'Coproc' folder not found one level up from build.gradle. Generate using './gradlew generateFramework'")
					ant.fail("`Coproc` folder not found")
				}
				commandLine 'make'
			}
		}
	}
}

// Run Vision locally
task runVisionUNIX(type:Exec) {
	description "Run Vision Locally with webcam to test"
	workingDir "$cj_vision_dir/build"
	commandLine './cjVision'
}